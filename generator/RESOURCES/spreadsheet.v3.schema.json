{
   "$id":"http://portable-spreadsheet.com/spreadsheet.v3.schema.json",
   "$schema":"http://json-schema.org/draft-07/schema#",
   "title":"Portable Spreadsheet JSON output schema",
   "description":"JSON schema of the Portable Spreadsheet output",
   "type":"object",
   "required":[
      "table"
   ],
   "properties":{
      "table":{
         "type":"object",
         "required":[
            "variables",
            "rows",
            "columns",
            "data"
         ],
         "properties":{
            "rows":{
               "type":"array",
               "items":{
                  "type":"object",
                  "properties":{
                     "name":{
                        "anyOf":[
                           {
                              "type":"string"
                           },
                           {
                              "type":"number"
                           },
                           {
                              "type":"null"
                           }
                        ]
                     },
                     "description":{
                        "anyOf":[
                           {
                              "type":"string"
                           },
                           {
                              "type":"number"
                           },
                           {
                              "type":"null"
                           }
                        ]
                     }
                  },
                  "additionalProperties":false,
                  "required":[
                     "name"
                  ]
               },
               "additionalProperties":false
            },
            "columns":{
               "type":"array",
               "items":{
                  "type":"object",
                  "properties":{
                     "name":{
                        "anyOf":[
                           {
                              "type":"string"
                           },
                           {
                              "type":"number"
                           },
                           {
                              "type":"null"
                           }
                        ]
                     },
                     "description":{
                        "anyOf":[
                           {
                              "type":"string"
                           },
                           {
                              "type":"number"
                           },
                           {
                              "type":"null"
                           }
                        ]
                     }
                  },
                  "additionalProperties":false,
                  "required":[
                     "name"
                  ]
               },
               "additionalProperties":false
            },
            "variables":{
               "minProperties":0,
               "type":"object",
               "propertyNames":{
                  "type":"string"
               },
               "patternProperties":{
                  "^.*$":{
                     "type":"object",
                     "properties":{
                        "value":{
                           "anyOf":[
                              {
                                 "type":"string"
                              },
                              {
                                 "type":"number"
                              },
                              {
                                 "type":"null"
                              }
                           ]
                        },
                        "description":{
                           "anyOf":[
                              {
                                 "type":"string"
                              },
                              {
                                 "type":"number"
                              },
                              {
                                 "type":"null"
                              }
                           ]
                        }
                     },
                     "required":[
                        "value",
                        "description"
                     ],
                     "additionalProperties":false
                  }
               },
               "additionalProperties":false
            },
            "data":{
               "type":"object",
               "minProperties":1,
               "maxProperties":2,
               "additionalProperties":false,
               "patternProperties":{
                  "rows|columns":{
                     "type":"object",
                     "minProperties":0,
                     "propertyNames":{
                        "type":"string"
                     },
                     "patternProperties":{
                        "^.*$":{
                           "type":"object",
                           "patternProperties":{
                              "rows|columns":{
                                 "type":"object",
                                 "minProperties":0,
                                 "propertyNames":{
                                    "type":"string"
                                 },
                                 "patternProperties":{
                                    "^.*$":{
                                       "type":"object",
                                       "minProperties":2,
                                       "propertyNames":{
                                          "type":"string"
                                       },
                                       "patternProperties":{
                                          "value":{
                                             "anyOf":[
                                                {
                                                   "type":"string"
                                                },
                                                {
                                                   "type":"number"
                                                },
                                                {
                                                   "type":"null"
                                                }
                                             ]
                                          },
                                          "description":{
                                             "anyOf":[
                                                {
                                                   "type":"string"
                                                },
                                                {
                                                   "type":"number"
                                                },
                                                {
                                                   "type":"null"
                                                }
                                             ]
                                          },
                                          "^.*$":{
                                             "anyOf":[
                                                {
                                                   "type":"string"
                                                },
                                                {
                                                   "type":"number"
                                                },
                                                {
                                                   "type":"null"
                                                }
                                             ]
                                          }
                                       },
                                       "required":[
                                          "value",
                                          "description"
                                       ],
                                       "additionalProperties":false
                                    }
                                 }
                              }
                           },
                           "minProperties":1,
                           "maxProperties":2,
                           "additionalProperties":false
                        }
                     },
                     "additionalProperties":false
                  }
               }
            }
         },
         "additionalProperties":false
      }
   },
   "additionalProperties":{
      "type":"object"
   }
}
